Index: xen-4.6.1/tools/libxl/libxl_dm.c
===================================================================
--- xen-4.6.1.orig/tools/libxl/libxl_dm.c
+++ xen-4.6.1/tools/libxl/libxl_dm.c
@@ -25,10 +25,10 @@ static const char *libxl_tapif_script(li
 {
 #if defined(__linux__) || defined(__FreeBSD__)
     if (info->stubdomain_version == LIBXL_STUBDOMAIN_VERSION_LINUX)
-        return libxl__sprintf(gc, "/etc/qemu-ifup");
+        return libxl__sprintf(gc, "/etc/qemu/qemu-ifup");
     return libxl__strdup(gc, "no");
 #else
-    return libxl__sprintf(gc, "%s/qemu-ifup", libxl__xen_script_dir_path());
+    return libxl__sprintf(gc, "%s/qemu/qemu-ifup", libxl__xen_script_dir_path());
 #endif
 }
 
@@ -1171,8 +1171,8 @@ static int libxl__build_device_model_arg
                 else if (disk < 4) {
                     if (b_info->stubdomain_version == LIBXL_STUBDOMAIN_VERSION_LINUX)
                         drive = libxl__sprintf
-                                (gc, "file=%s,if=ide,index=%d,media=disk,cache=writeback,format=%s",
-                                 "/dev/xvda", disk, "raw");
+                                (gc, "file=%s%c,if=ide,index=%d,media=disk,cache=writeback,format=%s",
+                                 "/dev/xvd", 'a' + disk, disk, "raw");
                     else
                         drive = libxl__sprintf
                                 (gc, "file=%s,if=ide,index=%d,media=disk,format=%s,cache=writeback",
Index: xen-4.6.1/tools/libxl/libxl_device.c
===================================================================
--- xen-4.6.1.orig/tools/libxl/libxl_device.c
+++ xen-4.6.1/tools/libxl/libxl_device.c
@@ -218,11 +218,11 @@ static int disk_try_backend(disk_try_bac
     case LIBXL_DISK_BACKEND_TAP:
         if (a->disk->script) goto bad_script;
 
-        if (a->disk->is_cdrom) {
-            LOG(DEBUG, "Disk vdev=%s, backend tap unsuitable for cdroms",
-                       a->disk->vdev);
-            return 0;
-        }
+        /* if (a->disk->is_cdrom) { */
+        /*     LOG(DEBUG, "Disk vdev=%s, backend tap unsuitable for cdroms", */
+        /*                a->disk->vdev); */
+        /*     return 0; */
+        /* } */
         if (!libxl__blktap_enabled(a->gc)) {
             LOG(DEBUG, "Disk vdev=%s, backend tap unsuitable because blktap "
                        "not available", a->disk->vdev);
